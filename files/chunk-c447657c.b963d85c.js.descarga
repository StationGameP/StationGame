(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c447657c","chunk-78e667ca"],{"19de":function(t,e,s){},"3a9a":function(t,e,s){},4083:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"auction-container",class:{"is-panel":t.isPanel}},[s("div",{staticClass:"auction"},[s("div",{staticClass:"auction__tabs"},[s("button",{staticClass:"auction__tab",class:{active:1===t.currentTab},on:{click:function(e){t.currentTab=1}}},[s("img",{attrs:{src:t.$iconCoinPath("bfg"),alt:"bfg"}}),s("span",[t._v(t._s(t.$t("auction.title"))+" BFG")])]),t.isPanel?t._e():s("button",{staticClass:"auction__tab",class:{active:3===t.currentTab},on:{click:function(e){t.currentTab=3}}},[s("Icon",{attrs:{type:"icon-rating"}}),s("span",[t._v(t._s(t.$t("Rating")))])],1)]),s("div",{staticClass:"auction__body"},[s("Tab"+t.currentTab,{tag:"components"})],1)]),s("div",{staticClass:"auction-list"},[s("List",{attrs:{tab:t.currentTab}})],1)])},a=[],n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"tab"},[s("Auction",{attrs:{type:"btc"}})],1)},r=[],c=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"auction auction_btc"},[s("button",{on:{click:function(e){return e.preventDefault(),t.$store.commit("popups/show",{popup:"auction",data:{currency:t.type}})}}},[s("Icon",{attrs:{type:"icon-question"}})],1),s("span",{staticClass:"auction__label"},[t._v(t._s(t.$t("Prize pool")))]),s("span",{staticClass:"auction__pool"},[s("span",[t._v(t._s(t.balance.toFixed(8)))]),t._v(" "+t._s(t.type.toUpperCase())+" ")]),s("div",{staticClass:"progress"},[s("span",{staticClass:"progress__label"},[t._v(t._s(t.$formatMilliseconds(t.timeout,"%m min %s sec")))]),t._v("s "),s("div",[s("div",{style:"width: "+t.progress+"%"})])]),s("form",{staticClass:"form",on:{submit:function(e){return e.preventDefault(),t.handleClick.apply(null,arguments)}}},[s("img",{staticClass:"form__currency",attrs:{src:t.$iconCoinPath("bfg"),alt:"bfg"}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.betAmount,expression:"betAmount"}],staticClass:"form__input",attrs:{inputmode:"numeric",readonly:!t.logged,type:"number",required:""},domProps:{value:t.betAmount},on:{paste:function(t){t.preventDefault()},keypress:function(e){return t.isDigit(e)},focusin:function(e){return t.$store.commit("ui/anyInputFocus",!0)},focusout:function(e){return t.$store.commit("ui/anyInputFocus",!1)},input:function(e){e.target.composing||(t.betAmount=e.target.value)}}}),s("span",{staticClass:"form__label"},[t._v("BFG")]),s("button",{staticClass:"form__btn btn btn_blue btn_medium",attrs:{type:"submit",disabled:t.isLocked}},[t.isLocked?s("Spinner"):[t._v(t._s(t.$t("Bid").toUpperCase()))]],2)]),s("div",{staticClass:"my-tokens"},[s("span",[t._v(" "+t._s(t.$t("My"))+" BFG: ")]),s("b",[t._v(t._s(t.tokens.toFixed(2)))])])])},o=[],u=s("025e"),l=s("2f62"),b={name:"Auction",props:{type:{type:String,required:!0}},components:{Spinner:()=>s.e("chunk-68c46248").then(s.bind(null,"1ff0"))},data(){return{betAmount:1,timer:null,timeout:0,isLocked:!1,progress:100,min:0}},methods:{...Object(l["b"])({subscribe:"auction/subscribe",unSubscribe:"auction/unSubscribe"}),handleClick(){if(!this.logged&&this.$socket.connected)return void this.$store.commit("popups/show",{popup:"LoginRegistration",data:{tab:2}});const t=this.$store.state.user.balance.game.bfg,{min:e}=this;Number(this.betAmount)>t?this.$notify({type:"error",title:this.$t("messages.Error"),text:"Insufficient balance"}):Number(this.betAmount)<e?this.$notify({type:"warn",title:"Warning",text:`Minimum bet is ${e} BFG`}):Number(this.betAmount)>.1*t?this.$store.commit("popups/show",{popup:"ConfirmAuction",data:{callback:()=>{this.placeBid()}}}):this.placeBid()},isDigit:u["h"],placeBid(){const{type:t,round:e}=this;this.isLocked=!0,this.$socket.emit("tokenauction.bet",{type:t,bet:Number(this.betAmount),round:e},({error:t})=>{this.isLocked=!1,t&&this.$notify({type:"error",title:this.$t("messages.Error"),text:t})})},updateTimer(){this.timeout=this.$getTimeout(this.endTime);const t=Math.trunc(new Date(this.endTime).getTime()-(new Date).getTime()),e=6e5;this.progress=Math.round(t/e*100)}},watch:{"$store.state.auction.auction_btc.users"(t){t.length&&(this.betAmount=t[0].betSize+1,this.min=this.betAmount)}},computed:{balance(){return this.$store.state.auction["auction_"+this.type].balance},endTime(){return this.$store.state.auction["auction_"+this.type].endTime},tokens(){return this.$store.state.user.balance.game.bfg},round(){return this.$store.state.auction["auction_"+this.type].round}},created(){this.updateTimer(),this.timer=setInterval(this.updateTimer,1e3),this.subscribe({type:"auction",currency:this.type.toUpperCase()})},destroyed(){clearInterval(this.timer),this.timer=null,this.timeout=0,this.unSubscribe({type:"auction",currency:this.type.toUpperCase()})}},p=b,m=(s("ab7f0"),s("2877")),_=Object(m["a"])(p,c,o,!1,null,"1c4f3d84",null),d=_.exports,h={name:"Tab1",components:{Auction:d}},f=h,v=Object(m["a"])(f,n,r,!1,null,null,null),y=v.exports,$=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"tab"},[s("h5",[t._v(t._s(t.$t("Rating").toUpperCase()))]),s("h6",{domProps:{innerHTML:t._s(t.$t("t50"))}})])},g=[],C={name:"Tab3",methods:{...Object(l["b"])({subscribe:"auction/subscribe",unSubscribe:"auction/unSubscribe"})},created(){this.subscribe({type:"rating"})},destroyed(){this.unSubscribe({type:"rating"})}},k=C,T=(s("502b"),Object(m["a"])(k,$,g,!1,null,"3aadbabb",null)),w=T.exports,A=s("c043"),x={name:"Auction",props:{isPanel:{type:Boolean,default:!1}},components:{Tab1:y,Tab3:w,List:A["default"]},data(){return{currentTab:1}}},P=x,I=(s("eaf8"),Object(m["a"])(P,i,a,!1,null,"7808a9d6",null));e["default"]=I.exports},"502b":function(t,e,s){"use strict";s("3a9a")},ab7f0:function(t,e,s){"use strict";s("ecfa")},c043:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"list"},[s("div",{staticClass:"list__head"},[s("span",[[1,2].includes(t.tab)?[t._v(t._s(t.$t("Player"))+"/"+t._s(t.$t("Bid")))]:t._e(),3===t.tab?[t._v(t._s(t.$t("Player")))]:t._e()],2),s("span",[[1,2].includes(t.tab)?[t._v(t._s(t.$t("Expected")))]:t._e(),3===t.tab?[t._v(t._s(t.$t("account.Total Wager")))]:t._e()],2)]),s("div",{staticClass:"list__inner"},[t.list.length?t._l(t.list,(function(e,i){return s("div",{key:i,staticClass:"list-item",class:{sticky:e.name===t.currentUserName}},[s("span",{staticClass:"list-item__num"},[e.loser?[t._v("-")]:[t._v(t._s(i+1))]],2),s("div",{staticClass:"list-item__user"},[s("div",{staticClass:"item-user"},[s("Avatar",{staticClass:"item-user__userpick",attrs:{id:e.avatarId,level:e.lvl,size:"medium"}}),s("span",{staticClass:"item-user__name"},[t._v(t._s(e.name))]),s("span",{staticClass:"item-user__betsize"},[3===t.tab?void 0:[t._v(t._s(e.betSize)+" BFG")]],2)],1)]),s("div",{staticClass:"list-item__expected"},[1===t.tab?[s("div",{staticClass:"currency"},[s("span",{domProps:{innerHTML:t._s(t.$currency(e.bonus,"#fff","#fff"))}}),s("img",{staticClass:"currency__coin",attrs:{src:t.$iconCoinPath(t.$store.state.auction.auction_btc.currency),alt:t.$store.state.auction.auction_btc.currency}})])]:t._e(),2===t.tab?[s("div",{staticClass:"currency"},[s("span",{domProps:{innerHTML:t._s(t.$currency(e.bonus,"#fff","#fff"))}}),s("img",{staticClass:"currency__coin",attrs:{src:t.$iconCoinPath(t.$store.state.auction.auction_trx.currency),alt:t.$store.state.auction.auction_trx.currency}})])]:t._e(),3===t.tab?[s("div",{staticClass:"currency"},[s("span",{domProps:{innerHTML:t._s(t.$currency(e.wager,"#fff","#fff"))}}),s("img",{staticClass:"currency__coin",attrs:{src:t.$iconCoinPath("btc"),alt:"btc"}})])]:t._e()],2)])})):s("NoInformation")],2)])},a=[],n={name:"List",components:{NoInformation:()=>s.e("chunk-236373f8").then(s.bind(null,"412e")),Avatar:()=>s.e("chunk-002c17cf").then(s.bind(null,"28e7"))},props:{tab:{type:Number,required:!0}},computed:{list(){let t=[];switch(this.tab){case 1:t=[...this.$store.state.auction.auction_btc.users];break;case 2:t=[...this.$store.state.auction.auction_trx.users];break;case 3:t=[...this.$store.state.auction.rating];break}if([3].includes(this.tab)&&this.logged){const e=t.some(t=>t.name===this.currentUserName);if(!e){const e={avatarId:this.$store.state.user.currAvatarId,lvl:this.$store.state.user.level,name:this.$store.state.user.username,userId:this.$store.state.user.id,wager:this.$store.state.user.totalWager,bonus:0,pts:this.$store.state.auction.war.my,loser:!0};t.push(e)}}return t},currentUserName(){return this.$store.state.user.username}}},r=n,c=(s("fae3"),s("2877")),o=Object(c["a"])(r,i,a,!1,null,"f9fb8156",null);e["default"]=o.exports},d637:function(t,e,s){},eaf8:function(t,e,s){"use strict";s("19de")},ecfa:function(t,e,s){},fae3:function(t,e,s){"use strict";s("d637")}}]);